(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&e(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();async function p(t){try{const r=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${t}&count=1&language=en&format=json`,{mode:"cors"});if(!r.ok)throw new Error("Could not fetch resource");const a=await r.json();if(!a.results||a.results.length===0)throw new Error(`No results found for ${t}`);return{name:a.results[0].name,latitude:a.results[0].latitude,longitude:a.results[0].longitude}}catch{throw new Error("Could not fetch resource")}}async function u(t){try{const r=await p(t),a=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${r.latitude}&longitude=${r.longitude}&current=temperature_2m,apparent_temperature,is_day,weather_code&daily=weather_code,temperature_2m_max,temperature_2m_min&timezone=auto`,{mode:"cors"});if(!a.ok)throw new Error("Could not fetch resource");const e=await a.json();return{location:r.name,currentWeather:{isDay:e.current.is_day,apparentTemperature:e.current.apparent_temperature,temperature_2m:e.current.temperature_2m,weatherCode:e.current.weather_code},dailyWeather:{temperature_2m_max:e.daily.temperature_2m_max,temperature_2m_min:e.daily.temperature_2m_min,weather_code:e.daily.weather_code}}}catch{throw new Error("Could not fetch resource")}}function f(t){t.addEventListener("invalid",()=>{t.setCustomValidity("Please enter a location.")}),t.addEventListener("input",()=>{t.setCustomValidity("")})}function w(t){const r=document.querySelector("h1");r.textContent=t}function l(t,r,a){const e=t;switch(r){case 0:a===1?e.src="images/weather-icons/0-day.svg":e.src="images/weather-icons/0-night.svg";break;case 1:a===1?e.src="images/weather-icons/1-day.svg":e.src="images/weather-icons/1-night.svg";break;case 2:a===1?e.src="images/weather-icons/2-day.svg":e.src="images/weather-icons/2-night.svg";break;case 3:e.src="images/weather-icons/3.svg";break;case 45:a===1?e.src="images/weather-icons/45-day.svg":e.src="images/weather-icons/45-night.svg";break;case 48:e.src="images/weather-icons/48.svg";break;case 51:a===1?e.src="images/weather-icons/51-day.svg":e.src="images/weather-icons/51-night.svg";break;case 53:case 55:e.src="images/weather-icons/53-55.svg";break;case 56:a===1?e.src="images/weather-icons/56-day.svg":e.src="images/weather-icons/56-night.svg";break;case 57:e.src="images/weather-icons/57.svg";break;case 61:case 80:a===1?e.src="images/weather-icons/61-80-day.svg":e.src="images/weather-icons/61-80-night.svg";break;case 63:case 65:case 81:case 82:e.src="images/weather-icons/63-65-81-82.svg";break;case 66:a===1?e.src="images/weather-icons/66-day.svg":e.src="images/weather-icons/66-night.svg";break;case 67:e.src="images/weather-icons/67.svg";break;case 71:case 77:case 85:a===1?e.src="images/weather-icons/71-77-85-day.svg":e.src="images/weather-icons/71-77-85-night.svg";break;case 73:case 75:e.src="images/weather-icons/73-75.svg";break;case 95:e.src="images/weather-icons/95.svg";break;case 96:case 99:e.src="images/weather-icons/96-99.svg";break}}function y(){const t=document.querySelectorAll(".daily_card_container h3"),r=new Date;t.forEach((a,e)=>{const o=new Date(r);o.setDate(r.getDate()+e+1);const c=o.getDate().toString().padStart(2,"0"),g=(o.getMonth()+1).toString().padStart(2,"0"),h=a;h.textContent=`${c}/${g}`})}function d(t){w(t.location),l(document.querySelector(".today_card img"),t.currentWeather.weatherCode,t.currentWeather.isDay),document.querySelector(".current_temperature_wrapper h2").textContent=`${Math.round(t.currentWeather.temperature_2m)}째`,document.querySelector(".current_temperature_wrapper p").textContent=`Feels like ${Math.round(t.currentWeather.apparentTemperature)}째`,y(),document.querySelectorAll(".daily_card_container img").forEach((e,o)=>{l(e,t.dailyWeather.weather_code[o],1)}),document.querySelectorAll(".daily_card_container p").forEach((e,o)=>{const s=e,c=Math.round(t.dailyWeather.temperature_2m_min[o]),i=Math.round(t.dailyWeather.temperature_2m_max[o]);s.textContent=`${c}째 - ${i}째`})}function _(t,r){const a=JSON.stringify(r);localStorage.setItem(t,a)}function v(t){const r=localStorage.getItem(t);return JSON.parse(r)}const n=document.querySelector(".loader");(async function(){try{n.classList.toggle("hidden");const r=v("location")||"London",a=await u(r);d(a),n.classList.toggle("hidden")}catch{throw new Error("Error initializing weather")}})();const m=document.getElementById("searchbox"),b=document.querySelector("form");f(m);b.addEventListener("submit",async t=>{t.preventDefault();try{n.classList.toggle("hidden");const r=m.value.trim(),a=await u(r);_("location",r),d(a),n.classList.toggle("hidden")}catch{throw new Error("Error fetching weather")}});
